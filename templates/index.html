<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tarini - Home</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@400;600;700&display=swap');
    
    :root {
      --primary: linear-gradient(135deg, #A8BBA3 0%, #B87C4C 50%, #EBD9D1 100%);
      --primary-solid: #A8BBA3;
      --secondary: linear-gradient(135deg, #B87C4C 0%, #EBD9D1 100%);
      --accent: #B87C4C;
      --emergency: #ff4444;
      --bg-primary: #F7F4EA;
      --bg-secondary: #EBD9D1;
      --bg-card: #EBD9D1;
      --text-primary: #B87C4C;
      --text-secondary: #A8BBA3;
      --text-muted: #6B7280;
      --glass: rgba(168, 187, 163, 0.1);
      --shadow: 0 8px 32px rgba(184, 124, 76, 0.3);
      --cute-pink: #FF6F91; /* Vibrant pink to match about page */
      --soft-purple: #A8BBA3;
      --mint-green: #A8BBA3;
      --peach: #EBD9D1;
      --success: #10B981;
      --warning: #F59E0B;
      --error: #EF4444;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--cute-pink); /* Vibrant pink background */
      font-family: 'Poppins', sans-serif;
      color: white; /* White text color for pink background */
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Animated Background */
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      background: var(--cute-pink); /* Use pink instead of brownish background */
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Floating particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .heart, .sparkle {
      position: absolute;
      animation: float 8s ease-in-out infinite;
      opacity: 0.6;
    }

    .heart {
      color: white; /* Change to white hearts on pink background */
      font-size: 20px;
    }

    .sparkle {
      color: white; /* Change to white sparkles on pink background */
      font-size: 16px;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.6; }
      50% { transform: translateY(-30px) rotate(10deg); opacity: 1; }
    }

    /* Header */
    header {
      background: var(--cute-pink);
      padding: 20px 40px;
      height: 80px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 20px rgba(255, 111, 145, 0.3);
      border-bottom: none;
      width: 100%;
      box-sizing: border-box;
    }

    .logo {
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: 100%;
    }

    .logo h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 2.5rem;
      font-weight: 700;
      color: white;
      margin: 0;
      line-height: 1;
    }

    .logo p {
      font-size: 0.9rem;
      opacity: 0.8;
      margin: 0;
      color: white;
      line-height: 1;
    }

    .logo h1::after {
      content: '';
    }

    @keyframes heartBeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    .logo p {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      font-style: italic;
      margin-top: 5px;
      letter-spacing: 1px;
    }

    nav {
      display: flex;
      gap: 30px; /* Standard gap for desktop nav buttons */
    }

    nav a {
      color: white;
      background: transparent;
      border-radius: 25px;
      padding: 10px 18px;
      font-weight: 500;
      text-decoration: none;
      transition: background 0.3s;
    }

    nav a:hover, nav a.active {
      background: rgba(255, 255, 255, 0.2);
      color: white !important;
      text-decoration: none;
    }

    /* User greeting in nav */
    nav span {
      background: rgba(255, 255, 255, 0.2); /* White transparent background */
      padding: 8px 15px;
      border-radius: 20px;
      border: 2px solid white; /* White border */
      font-size: 0.9rem;
      display: inline-block;
      color: white !important; /* White text */
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 80px 20px;
      position: relative;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 50px;
      left: 15%;
      font-size: 3rem;
      opacity: 0.6;
      animation: float 4s ease-in-out infinite;
    }

    .hero::after {
      content: '';
      position: absolute;
      top: 80px;
      right: 20%;
      font-size: 2.5rem;
      opacity: 0.7;
      animation: float 5s ease-in-out infinite;
    }

    .hero h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 4rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: white; /* TARINI in white */
      background: none;
      -webkit-background-clip: initial;
      -webkit-text-fill-color: initial;
      background-clip: initial;
      animation: fadeInUp 1s ease-out 0.2s both;
    }

    .hero p {
      font-size: 1.3rem;
      color: white; /* Make hero paragraph text white */
      max-width: 700px;
      margin: 0 auto 40px;
      animation: fadeInUp 1s ease-out 0.4s both;
      line-height: 1.8;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Main Content */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .section-title {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 50px;
      color: white !important; /* White text for section titles */
      position: relative;
    }

    .section-title::after {
      content: '';
      position: absolute;
      right: -50px;
      top: 0;
      font-size: 2rem;
      animation: sparkle 3s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.2); }
    }

    /* Feature Cards */
    .features {
      padding: 60px 0;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 40px;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.15); /* Transparent white background */
      border: 2px solid rgba(255, 255, 255, 0.3); /* Transparent white border */
      box-shadow: 0 8px 32px rgba(255, 255, 255, 0.2); /* Subtle white shadow */
      backdrop-filter: blur(20px);
      padding: 50px 35px;
      border-radius: 30px;
      text-align: center;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      animation: cardFloat 6s ease-in-out infinite;
      color: white !important; /* White text on transparent cards */
    }

    @keyframes cardFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .feature-card:nth-child(2) { animation-delay: 2s; }
    .feature-card:nth-child(3) { animation-delay: 4s; }
    .feature-card:nth-child(4) { animation-delay: 3s; }

    .feature-card:hover {
      transform: translateY(-15px) scale(1.05);
      background: rgba(255, 255, 255, 0.25); /* Slightly more opaque on hover */
      box-shadow: 0 12px 40px rgba(255, 255, 255, 0.3); /* Enhanced white shadow on hover */
    }

    .card-icon {
      font-size: 4rem;
      margin-bottom: 25px;
      display: block;
      color: white !important; /* White icons on transparent cards */
      filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.2));
    }

    .feature-card h3 {
      font-family: 'Dancing Script', cursive;
      font-size: 2.2rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: white !important; /* White headings on transparent cards */
    }

    .feature-card p {
      color: rgba(255, 255, 255, 0.9) !important; /* Slightly transparent white text */
      font-size: 1.1rem;
      line-height: 1.6;
    }

    /* Emergency Card Special Styling */
    .emergency-card {
      background: rgba(255, 68, 68, 0.15) !important; /* Transparent red background for emergency card */
      border: 2px solid rgba(255, 68, 68, 0.6) !important; /* Red border for emergency */
      box-shadow: 0 8px 32px rgba(255, 68, 68, 0.4) !important; /* Red shadow */
      animation: emergencyGlow 2s ease-in-out infinite, cardFloat 6s ease-in-out infinite;
      position: relative;
      color: white !important; /* White text for emergency card */
    }

    .emergency-card::after {
      content: 'PRIORITY';
      position: absolute;
      top: -15px;
      right: -10px;
      background: linear-gradient(135deg, var(--emergency), #ff4569);
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      letter-spacing: 1px;
      animation: priorityBounce 1.5s ease-in-out infinite;
    }

    @keyframes emergencyGlow {
      0%, 100% { 
        box-shadow: 0 8px 32px rgba(255, 68, 68, 0.4);
      }
      50% { 
        box-shadow: 0 12px 40px rgba(255, 68, 68, 0.6);
      }
    }

    @keyframes priorityBounce {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-3px) scale(1.05); }
    }

    /* Buttons */
    .btn {
      background: var(--cute-pink);
      border: none;
      padding: 15px 35px;
      border-radius: 25px;
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(255, 111, 145, 0.3); /* Pink shadow */
      font-family: 'Poppins', sans-serif;
      text-decoration: none;
      display: inline-block;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(255, 111, 145, 0.4); /* Pink hover shadow */
    }

    .btn-emergency {
      background: linear-gradient(135deg, var(--emergency), #ff4569);
      animation: emergencyPulse 2s ease-in-out infinite;
    }

    @keyframes emergencyPulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 6px 20px rgba(255, 23, 68, 0.3), 0 0 0 0 rgba(255, 23, 68, 0.7);
      }
      50% { 
        transform: scale(1.05);
        box-shadow: 0 10px 30px rgba(255, 23, 68, 0.5), 0 0 0 15px rgba(255, 23, 68, 0);
      }
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 50px 20px;
      color: rgba(255, 255, 255, 0.9); /* White footer text */
      font-size: 1rem;
      margin-top: 80px;
      background: rgba(255, 255, 255, 0.1); /* Subtle white overlay */
      backdrop-filter: blur(20px);
    }

    footer p:first-child {
      font-weight: 600;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    footer p:last-child {
      font-style: italic;
    }

    /* Responsive */
    @media (max-width: 768px) {
      header {
        padding: 15px 20px;
        flex-direction: column;
        gap: 20px;
      }

      .logo h1 {
        font-size: 2rem;
      }

      nav {
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px; /* Standard gap for mobile nav buttons */
      }

      nav a {
        font-size: 0.9rem;
        padding: 8px 15px;
      }

      .hero h1 {
        font-size: 3rem;
      }

      .hero p {
        font-size: 1.1rem;
      }

      .section-title {
        font-size: 2.5rem;
      }

      .grid-3 {
        grid-template-columns: 1fr;
        max-width: 400px;
        margin: 0 auto;
      }
    }

    .btn.join-tarini:hover {
      /* No bulging effect, just a soft shadow */
      box-shadow: 0 10px 30px rgba(255,182,193,0.4);
    }
  </style>
</head>
<body>
  
  


  {% if session.user_id and user_name and request.endpoint not in ['login', 'register'] %}
    <!-- Header for logged-in users -->
    <header>
      <div class="logo">
        <h1>TARINI</h1>
        <p>Always By Her Side</p>
      </div>
      <nav>
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('about') }}">About</a>
        <a href="{{ url_for('manage_contacts') }}">Contacts</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('voice_notes_page') }}">Voice Notes</a>
        <span style="color: white; font-weight: 600; margin: 0 10px;">Hi, {{ user_name.split()[0] }}!</span>
        <a href="{{ url_for('logout') }}">Logout</a>
      </nav>
    </header>
  {% else %}
    <!-- Minimal nav for guests -->
    <nav style="display: flex; justify-content: center; gap: 20px; padding: 20px 0;">
      <a href="{{ url_for('home') }}" style="color: white; background: transparent; border-radius: 25px; padding: 10px 18px; font-weight: 500; text-decoration: none; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='transparent'">Home</a>
      <a href="{{ url_for('about') }}" style="color: white; background: transparent; border-radius: 25px; padding: 10px 18px; font-weight: 500; text-decoration: none; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='transparent'">About</a>
      <a href="{{ url_for('login') }}" style="color: white; background: transparent; border-radius: 25px; padding: 10px 18px; font-weight: 500; text-decoration: none; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='transparent'">Login</a>
      <a href="{{ url_for('register') }}" style="color: white; background: transparent; border-radius: 25px; padding: 10px 18px; font-weight: 500; text-decoration: none; transition: background 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='transparent'">Register</a>
    </nav>
  {% endif %}

  <!-- Hero Section -->
  <div class="hero" style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 80vh;">
    <h1 style="font-family: 'Dancing Script', cursive; font-size: 4rem; font-weight: 700; margin-bottom: 20px; color: white; background: none; -webkit-background-clip: initial; -webkit-text-fill-color: initial; background-clip: initial; animation: fadeInUp 1s ease-out 0.2s both;">
      TARINI
    </h1>
    <p style="font-size: 1.3rem; color: white; max-width: 700px; margin: 0 auto 40px; animation: fadeInUp 1s ease-out 0.4s both; line-height: 1.8; text-align: center;">
      Empowering amazing women with the cutest safety technology! Stay connected, stay protected, and sparkle with confidence. Tarini is your bestie who's always got your back!
    </p>
    {% if session.user_id and user_name and request.endpoint not in ['login', 'register'] %}
      <!-- Quick Emergency Actions -->
      <div style="margin: 30px 0; display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
        <button onclick="triggerSOS()" class="btn btn-emergency" style="font-size: 1.1rem; padding: 15px 25px;">
          INSTANT SOS
        </button>
        <button onclick="shareLocation()" class="btn" style="background: var(--emergency); font-size: 1.1rem; padding: 15px 25px;">
          Share Live Location
        </button>
        <button onclick="startFakeCall()" class="btn" style="background: var(--accent); font-size: 1.1rem; padding: 15px 25px;">
          Fake Voice Call
        </button>
      </div>
      <a href="{{ url_for('dashboard') }}" class="btn btn-emergency">Go to Dashboard</a>
    {% else %}
      <a href="{{ url_for('register') }}" class="btn join-tarini" style="background: white; color: var(--cute-pink); box-shadow: 0 6px 20px rgba(255,182,193,0.3); border-radius: 25px; font-weight: 600; font-size: 1.1rem; transition: all 0.3s cubic-bezier(0.175,0.885,0.32,1.275);">Join Tarini</a>
    {% endif %}
  </div>
  <style>
    .btn.join-tarini:hover {
      /* No bulging effect, just a soft shadow */
      box-shadow: 0 10px 30px rgba(255,182,193,0.4);
    }
  </style>

  {% if session.user_id and user_name and request.endpoint not in ['login', 'register'] %}
    <!-- Main Features -->
    <div class="container">
      <div class="section-title">Our Amazing Features</div>
      <div class="features">
        <div class="grid-3">
          <div class="feature-card emergency-card" onclick="location.href='{{ url_for('dashboard') }}'">
            <div class="card-icon"></div>
            <h3>Emergency Alert</h3>
            <p>Send instant SOS alerts to your squad with real-time location sharing. Your safety network will be there in a heartbeat!</p>
          </div>
          <div class="feature-card" onclick="location.href='{{ url_for('manage_contacts') }}'">
            <div class="card-icon"></div>
            <h3>Manage Contacts</h3>
            <p>Build your girl gang safety circle! Add your besties, family, and trusted friends who'll always have your back.</p>
          </div>
          <div class="feature-card" onclick="location.href='{{ url_for('voice_notes_page') }}'">
            <div class="card-icon"></div>
            <h3>Fake Voice Note</h3>
            <p>Upload and play custom voice messages to create the perfect excuse. Escape uncomfortable situations with style!</p>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  <!-- Language Selector Button -->
<div id="language-selector" style="position: fixed; top: 30px; right: 30px; z-index: 2000;">
  <button id="choose-language-btn" class="btn" style="background: white; color: var(--cute-pink); border: 2px solid var(--cute-pink); font-weight: 600; font-size: 1rem; border-radius: 20px; padding: 10px 22px; cursor: pointer;">
    üåê Choose Language
  </button>
  <div id="language-dropdown" style="display: none; position: absolute; top: 45px; right: 0; background: white; border: 2px solid var(--cute-pink); border-radius: 20px; box-shadow: 0 6px 20px rgba(255,182,193,0.2); min-width: 180px;">
    <ul style="list-style: none; margin: 0; padding: 10px 0;">
      <li><a href="#" data-lang="en" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">English</a></li>
      <li><a href="#" data-lang="hi" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</a></li>
      <li><a href="#" data-lang="bn" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</a></li>
      <li><a href="#" data-lang="te" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</a></li>
      <li><a href="#" data-lang="mr" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡§Æ‡§∞‡§æ‡§†‡•Ä</a></li>
      <li><a href="#" data-lang="ta" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</a></li>
      <li><a href="#" data-lang="ur" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">ÿßÿ±ÿØŸà</a></li>
      <li><a href="#" data-lang="gu" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</a></li>
      <li><a href="#" data-lang="kn" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡≤ï‡≤®‡≥ç‡≤®‡≤°</a></li>
      <li><a href="#" data-lang="ml" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</a></li>
      <li><a href="#" data-lang="pa" style="display: block; padding: 8px 20px; color: var(--cute-pink); text-decoration: none;">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</a></li>
    </ul>
  </div>
</div>

<script>
// Language translations for homepage demo
const translations = {
  en: {
    heroTitle: "TARINI",
    heroDesc: "Empowering amazing women with the cutest safety technology! Stay connected, stay protected, and sparkle with confidence. Tarini is your bestie who's always got your back!",
    joinBtn: "Join Tarini"
  },
  hi: {
    heroTitle: "‡§§‡§æ‡§∞‡§ø‡§£‡•Ä",
    heroDesc: "‡§Ö‡§¶‡•ç‡§≠‡•Å‡§§ ‡§Æ‡§π‡§ø‡§≤‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§∏‡§¨‡§∏‡•á ‡§™‡•ç‡§Ø‡§æ‡§∞‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§§‡§ï‡§®‡•Ä‡§ï ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§∂‡§ï‡•ç‡§§ ‡§¨‡§®‡§æ‡§®‡§æ! ‡§ú‡•Å‡§°‡§º‡•á ‡§∞‡§π‡•á‡§Ç, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡•á‡§Ç, ‡§î‡§∞ ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ö‡§Æ‡§ï‡•á‡§Ç‡•§ ‡§§‡§æ‡§∞‡§ø‡§£‡•Ä ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§¶‡•ã‡§∏‡•ç‡§§ ‡§π‡•à ‡§ú‡•ã ‡§π‡§Æ‡•á‡§∂‡§æ ‡§Ü‡§™‡§ï‡•á ‡§∏‡§æ‡§• ‡§π‡•à!",
    joinBtn: "‡§§‡§æ‡§∞‡§ø‡§£‡•Ä ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á‡§Ç"
  },
  bn: {
    heroTitle: "‡¶§‡¶æ‡¶∞‡¶ø‡¶£‡ßÄ",
    heroDesc: "‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶®‡¶æ‡¶∞‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶™‡ßç‡¶∞‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡ßç‡¶∑‡¶Æ‡¶§‡¶æ‡¶Ø‡¶º‡¶®! ‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®, ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®, ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶§‡ßç‡¶Æ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡ßá ‡¶â‡¶ú‡ßç‡¶ú‡ßç‡¶¨‡¶≤ ‡¶π‡¶®‡•§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶£‡ßÄ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∂‡ßá ‡¶•‡¶æ‡¶ï‡¶æ ‡¶∏‡ßá‡¶∞‡¶æ ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ!",
    joinBtn: "‡¶§‡¶æ‡¶∞‡¶ø‡¶£‡ßÄ‡¶§‡ßá ‡¶Ø‡ßã‡¶ó ‡¶¶‡¶ø‡¶®"
  },
  te: {
    heroTitle: "‡∞§‡∞æ‡∞∞‡∞ø‡∞£‡∞ø",
    heroDesc: "‡∞Ö‡∞¶‡±ç‡∞≠‡±Å‡∞§‡∞Æ‡±à‡∞® ‡∞Æ‡∞π‡∞ø‡∞≥‡∞≤‡∞®‡±Å cutest safety technology ‡∞§‡±ã ‡∞∂‡∞ï‡±ç‡∞§‡∞ø‡∞µ‡∞Ç‡∞§‡∞Ç ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç! ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞Ö‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø, ‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞Ç‡∞°‡∞ø, ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Ü‡∞§‡±ç‡∞Æ‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞∏‡∞Ç‡∞§‡±ã ‡∞Æ‡±Ü‡∞∞‡±Å‡∞ó‡±Å ‡∞™‡∞°‡∞Ç‡∞°‡∞ø. ‡∞§‡∞æ‡∞∞‡∞ø‡∞£‡∞ø ‡∞Æ‡±Ä‡∞ï‡±Å ‡∞é‡∞™‡±ç‡∞™‡±Å‡∞°‡±Ç ‡∞§‡±ã‡∞°‡±Å‡∞ó‡∞æ ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø!",
    joinBtn: "‡∞§‡∞æ‡∞∞‡∞ø‡∞£‡∞ø‡∞≤‡±ã ‡∞ö‡±á‡∞∞‡∞Ç‡∞°‡∞ø"
  },
  mr: {
    heroTitle: "‡§§‡§æ‡§∞‡§ø‡§£‡•Ä",
    heroDesc: "‡§Ö‡§¶‡•ç‡§≠‡•Å‡§§ ‡§Æ‡§π‡§ø‡§≤‡§æ‡§Ç‡§®‡§æ ‡§∏‡§∞‡•ç‡§µ‡§æ‡§§ ‡§ó‡•ã‡§° ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§®‡•á ‡§∏‡§∂‡§ï‡•ç‡§§ ‡§¨‡§®‡§µ‡§£‡•á! ‡§ú‡•ã‡§°‡§≤‡•á‡§≤‡•á ‡§∞‡§π‡§æ, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡§æ, ‡§Ü‡§£‡§ø ‡§Ü‡§§‡•ç‡§Æ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏‡§æ‡§®‡•á ‡§ö‡§Æ‡§ï‡§æ. ‡§§‡§æ‡§∞‡§ø‡§£‡•Ä ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§®‡•á‡§π‡§Æ‡•Ä‡§ö‡•Ä ‡§∏‡•ã‡§¨‡§§‡•Ä ‡§Ü‡§π‡•á!",
    joinBtn: "‡§§‡§æ‡§∞‡§ø‡§£‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡§æ‡§Æ‡•Ä‡§≤ ‡§µ‡•ç‡§π‡§æ"
  },
  ta: {
    heroTitle: "‡Æ§‡Ææ‡Æ∞‡Æø‡Æ£‡Æø",
    heroDesc: "‡ÆÖ‡Æ±‡Øç‡Æ™‡ØÅ‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æ™‡ØÜ‡Æ£‡Øç‡Æï‡Æ≥‡Øà ‡ÆÖ‡Æ¥‡Æï‡Ææ‡Æ© ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Øä‡Æ¥‡Æø‡Æ≤‡Øç‡Æ®‡ØÅ‡Æü‡Øç‡Æ™‡Æ§‡Øç‡Æ§‡ØÅ‡Æü‡Æ©‡Øç ‡ÆÖ‡Æ§‡Æø‡Æï‡Ææ‡Æ∞‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æ§‡Æ≤‡Øç! ‡Æá‡Æ£‡Øà‡Æ®‡Øç‡Æ§‡Æø‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç, ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡Ææ‡Æï ‡Æá‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç, ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ®‡ÆÆ‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Øà‡ÆØ‡ØÅ‡Æü‡Æ©‡Øç ‡Æ™‡Æø‡Æ∞‡Æï‡Ææ‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æ§‡Ææ‡Æ∞‡Æø‡Æ£‡Æø ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æ£‡Øç‡Æ™‡Æø!",
    joinBtn: "‡Æ§‡Ææ‡Æ∞‡Æø‡Æ£‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç"
  },
  ur: {
    heroTitle: "ÿ™ÿßÿ±ŸêŸÜ€å",
    heroDesc: "ÿ≠€åÿ±ÿ™ ÿßŸÜ⁄Ø€åÿ≤ ÿÆŸàÿßÿ™€åŸÜ ⁄©Ÿà ÿ≥ÿ® ÿ≥€í ÿÆŸàÿ®ÿµŸàÿ±ÿ™ ÿ≠ŸÅÿßÿ∏ÿ™€å Ÿπ€å⁄©ŸÜÿßŸÑŸàÿ¨€å ⁄©€í ÿ≥ÿßÿ™⁄æ ÿ®ÿßÿßÿÆÿ™€åÿßÿ± ÿ®ŸÜÿßŸÜÿß! ÿ¨⁄ë€í ÿ±€Å€å⁄∫ÿå ŸÖÿ≠ŸÅŸàÿ∏ ÿ±€Å€å⁄∫ÿå ÿßŸàÿ± ÿßÿπÿ™ŸÖÿßÿØ ⁄©€í ÿ≥ÿßÿ™⁄æ ⁄ÜŸÖ⁄©€å⁄∫€î ÿ™ÿßÿ±ŸêŸÜ€å ÿ¢Ÿæ ⁄©€å ÿ®€Åÿ™ÿ±€åŸÜ ÿØŸàÿ≥ÿ™ €Å€í ÿ¨Ÿà €ÅŸÖ€åÿ¥€Å ÿ¢Ÿæ ⁄©€í ÿ≥ÿßÿ™⁄æ €Å€í!",
    joinBtn: "ÿ™ÿßÿ±ŸêŸÜ€å ŸÖ€å⁄∫ ÿ¥ÿßŸÖŸÑ €ÅŸà⁄∫"
  },
  gu: {
    heroTitle: "‡™§‡™æ‡™∞‡™ø‡™£‡´Ä",
    heroDesc: "‡™Ö‡™¶‡´ç‡™≠‡´Å‡™§ ‡™Æ‡™π‡™ø‡™≤‡™æ‡™ì‡™®‡´á ‡™∏‡´å‡™•‡´Ä ‡™∏‡´Å‡™Ç‡™¶‡™∞ ‡™∏‡´Å‡™∞‡™ï‡´ç‡™∑‡™æ ‡™ü‡´á‡™ï‡™®‡´ã‡™≤‡´ã‡™ú‡´Ä‡™•‡´Ä ‡™∏‡™∂‡™ï‡´ç‡™§ ‡™¨‡™®‡™æ‡™µ‡™µ‡´Ä! ‡™ú‡´ã‡™°‡™æ‡™Ø‡´á‡™≤‡™æ ‡™∞‡™π‡´ã, ‡™∏‡´Å‡™∞‡™ï‡´ç‡™∑‡™ø‡™§ ‡™∞‡™π‡´ã, ‡™Ö‡™®‡´á ‡™Ü‡™§‡´ç‡™Æ‡™µ‡™ø‡™∂‡´ç‡™µ‡™æ‡™∏ ‡™∏‡™æ‡™•‡´á ‡™ö‡™Æ‡™ï‡´ã. ‡™§‡™æ‡™∞‡™ø‡™£‡´Ä ‡™§‡™Æ‡™æ‡™∞‡´Ä ‡™∏‡´å‡™•‡´Ä ‡™∏‡™æ‡™∞‡´Ä ‡™Æ‡™ø‡™§‡´ç‡™∞ ‡™õ‡´á!",
    joinBtn: "‡™§‡™æ‡™∞‡™ø‡™£‡´Ä‡™Æ‡™æ‡™Ç ‡™ú‡´ã‡™°‡™æ‡™ì"
  },
  kn: {
    heroTitle: "‡≤§‡≤æ‡≤∞‡≤ø‡≤£‡≤ø",
    heroDesc: "‡≤Ö‡≤¶‡≥ç‡≤≠‡≥Å‡≤§ ‡≤Æ‡≤π‡≤ø‡≤≥‡≥Ü‡≤Ø‡≤∞‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤§‡≤æ ‡≤§‡≤Ç‡≤§‡≥ç‡≤∞‡≤ú‡≥ç‡≤û‡≤æ‡≤®‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤∂‡≤ï‡≥ç‡≤§‡≤ø‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å! ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø‡≤∞‡≤ø, ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤∞‡≤ø, ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ü‡≤§‡≥ç‡≤Æ‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ‡≤æ‡≤∏‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤π‡≥ä‡≤≥‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø. ‡≤§‡≤æ‡≤∞‡≤ø‡≤£‡≤ø ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Ü‡≤∏‡≥ç‡≤ü‡≥ç ‡≤´‡≥ç‡≤∞‡≥Ü‡≤Ç‡≤°‡≥ç!",
    joinBtn: "‡≤§‡≤æ‡≤∞‡≤ø‡≤£‡≤ø‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∏‡≥á‡≤∞‡≤ø"
  },
  ml: {
    heroTitle: "‡¥§‡¥æ‡¥∞‡¥ø‡¥£‡¥ø",
    heroDesc: "‡¥Ö‡¥¶‡µç‡¥≠‡µÅ‡¥§‡¥Æ‡¥æ‡¥Ø ‡¥∏‡µç‡¥§‡µç‡¥∞‡µÄ‡¥ï‡¥≥‡µÜ ‡¥è‡¥±‡µç‡¥±‡¥µ‡µÅ‡¥Ç ‡¥Æ‡¥®‡µã‡¥π‡¥∞‡¥Æ‡¥æ‡¥Ø ‡¥∏‡µÅ‡¥∞‡¥ï‡µç‡¥∑‡¥æ ‡¥∏‡¥æ‡¥ô‡µç‡¥ï‡µá‡¥§‡¥ø‡¥ï‡¥µ‡¥ø‡¥¶‡µç‡¥Ø‡¥Ø‡¥ø‡¥≤‡µÇ‡¥ü‡µÜ ‡¥∂‡¥ï‡µç‡¥§‡¥ø‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥®‡µç‡¥®‡µÅ! ‡¥¨‡¥®‡µç‡¥ß‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥ï, ‡¥∏‡µÅ‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥§‡¥∞‡¥æ‡¥ï‡µÅ‡¥ï, ‡¥Ü‡¥§‡µç‡¥Æ‡¥µ‡¥ø‡¥∂‡µç‡¥µ‡¥æ‡¥∏‡¥§‡µç‡¥§‡µã‡¥ü‡µÜ ‡¥™‡µç‡¥∞‡¥ï‡¥æ‡¥∂‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï. ‡¥§‡¥æ‡¥∞‡¥ø‡¥£‡¥ø ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥è‡¥±‡µç‡¥±‡¥µ‡µÅ‡¥Ç ‡¥®‡¥≤‡µç‡¥≤ ‡¥∏‡µÅ‡¥π‡µÉ‡¥§‡µç‡¥§‡µç!",
    joinBtn: "‡¥§‡¥æ‡¥∞‡¥ø‡¥£‡¥ø‡¥Ø‡¥ø‡µΩ ‡¥ö‡µá‡¥∞‡µÅ‡¥ï"
  },
  pa: {
    heroTitle: "‡®§‡®æ‡®∞‡®ø‡®®‡©Ä",
    heroDesc: "‡®∏‡®º‡®æ‡®®‡®¶‡®æ‡®∞ ‡®î‡®∞‡®§‡®æ‡®Ç ‡®®‡©Ç‡©∞ ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®™‡®ø‡®Ü‡®∞‡©Ä ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®§‡®ï‡®®‡®æ‡®≤‡©ã‡®ú‡©Ä ‡®®‡®æ‡®≤ ‡®∏‡®º‡®ï‡®§‡©Ä‡®∏‡®º‡®æ‡®≤‡©Ä ‡®¨‡®£‡®æ‡®â‡®£‡®æ! ‡®ú‡©Å‡©ú‡©á ‡®∞‡®π‡©ã, ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®∞‡®π‡©ã, ‡®Ö‡®§‡©á ‡®Ü‡®§‡®Æ-‡®µ‡®ø‡®∏‡®º‡®µ‡®æ‡®∏ ‡®®‡®æ‡®≤ ‡®ö‡®Æ‡®ï‡©ã‡•§ ‡®§‡®æ‡®∞‡®ø‡®®‡©Ä ‡®§‡©Å‡®π‡®æ‡®°‡©Ä ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®µ‡®ß‡©Ä‡®Ü ‡®¶‡©ã‡®∏‡®§ ‡®π‡©à ‡®ú‡©ã ‡®π‡®Æ‡©á‡®∏‡®º‡®æ ‡®§‡©Å‡®π‡®æ‡®°‡©á ‡®®‡®æ‡®≤ ‡®π‡©à!",
    joinBtn: "‡®§‡®æ‡®∞‡®ø‡®®‡©Ä ‡®µ‡®ø‡©±‡®ö ‡®∏‡®º‡®æ‡®Æ‡®≤ ‡®π‡©ã‡®µ‡©ã"
  }
};

// Show/hide dropdown
const chooseBtn = document.getElementById('choose-language-btn');
const dropdown = document.getElementById('language-dropdown');
chooseBtn.onclick = function() {
  dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
};
document.addEventListener('click', function(e) {
  if (!chooseBtn.contains(e.target) && !dropdown.contains(e.target)) {
    dropdown.style.display = 'none';
  }
});

// Change language
const langLinks = dropdown.querySelectorAll('a[data-lang]');
langLinks.forEach(link => {
  link.onclick = function(e) {
    e.preventDefault();
    const lang = this.getAttribute('data-lang');
    setLanguage(lang);
    dropdown.style.display = 'none';
  };
});

function setLanguage(lang) {
  const t = translations[lang] || translations['en'];
  // Hero title
  const heroTitle = document.querySelector('.hero h1');
  if (heroTitle) heroTitle.textContent = t.heroTitle;
  // Hero description
  const heroDesc = document.querySelector('.hero p');
  if (heroDesc) heroDesc.textContent = t.heroDesc;
  // Join Tarini button (for guests)
  const joinBtn = document.querySelector('.btn.join-tarini');
  if (joinBtn) joinBtn.textContent = t.joinBtn;
}
</script>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Tarini ‚Ä¢ SheShield - Women Safety Companion</p>
    <p>Empowering queens through technology ‚Ä¢ Made with lots of love for safety</p>
  </footer>

  <script>
    // Create floating hearts and sparkles
    function createParticles() {
      const particlesContainer = document.querySelector('.particles');
      const heartCount = 15;
      const sparkleCount = 20;
      
      // Create hearts
      for (let i = 0; i < heartCount; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.innerHTML = '';
        
        heart.style.left = Math.random() * 100 + '%';
        heart.style.top = Math.random() * 100 + '%';
        heart.style.animationDelay = Math.random() * 8 + 's';
        
        particlesContainer.appendChild(heart);
      }
      
      // Create sparkles
      for (let i = 0; i < sparkleCount; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.innerHTML = '*';
        
        sparkle.style.left = Math.random() * 100 + '%';
        sparkle.style.top = Math.random() * 100 + '%';
        sparkle.style.animationDelay = Math.random() * 6 + 's';
        
        particlesContainer.appendChild(sparkle);
      }
    }

    // Initialize particles when page loads
    window.addEventListener('load', createParticles);

    // Add cute click ripple effect with hearts
    document.querySelectorAll('.feature-card').forEach(card => {
      card.addEventListener('click', function(e) {
        const ripple = document.createElement('div');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.cssText = `
          position: absolute;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(168, 187, 163, 0.6) 0%, transparent 70%);
          width: ${size}px;
          height: ${size}px;
          left: ${x}px;
          top: ${y}px;
          animation: cuteRipple 0.8s ease-out;
          pointer-events: none;
        `;
        
        this.appendChild(ripple);
        
        setTimeout(() => {
          ripple.remove();
        }, 800);
      });
    });
    
    // Add CSS for cute animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes cuteRipple {
        from {
          transform: scale(0);
          opacity: 1;
        }
        to {
          transform: scale(2);
          opacity: 0;
        }
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      @keyframes slideDown {
        from { 
          transform: translateY(-50px);
          opacity: 0;
        }
        to { 
          transform: translateY(0);
          opacity: 1;
        }
      }
      
      @keyframes pulse {
        0%, 100% { 
          transform: scale(1);
          opacity: 1;
        }
        50% { 
          transform: scale(1.1);
          opacity: 0.8;
        }
      }
    `;
    document.head.appendChild(style);

    // Emergency action functions for home page buttons
    window.shareLocation = function(event) {
      console.log('Share Live Location button clicked');
      if (navigator.geolocation) {
        // Show loading message
        const button = event ? event.target : document.querySelector('button[onclick*="shareLocation"]');
        const originalText = button.innerHTML;
        button.innerHTML = 'Getting Location...';
        button.disabled = true;
        navigator.geolocation.getCurrentPosition(
          function(position) {
            console.log('Geolocation success:', position);
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const accuracy = position.coords.accuracy;
            // Show popup with location shared message
            showLocationPopup(lat, lng, accuracy);
            // Reset button
            button.innerHTML = originalText;
            button.disabled = false;
          },
          function(error) {
            console.error('Geolocation error:', error);
            let errorMsg = 'Could not get your location. Please check your location settings.';
            if (error.code === 1) errorMsg = 'Permission denied. Please allow location access.';
            else if (error.code === 2) errorMsg = 'Position unavailable. Try again later.';
            else if (error.code === 3) errorMsg = 'Location request timed out.';
            showLocationErrorPopup(errorMsg);
            // Reset button
            button.innerHTML = originalText;
            button.disabled = false;
          },
          {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
          }
        );
      } else {
        console.error('Geolocation not supported by this browser.');
        showLocationErrorPopup('Geolocation is not supported by this browser.');
      }
    };

    window.startFakeCall = function(event) {
      // Check if user is logged in
      {% if not session.user_id %}
        alert('Please login first to access your voice notes!');
        window.location.href = '{{ url_for("login") }}';
        return;
      {% endif %}

      const button = event ? event.target : document.querySelector('button[onclick*="startFakeCall"]');
      const originalText = button.innerHTML;
      button.innerHTML = 'üì± Loading Voice Notes...';
      button.disabled = true;

      // Fetch voice notes from the server
      fetch('/get-voice-notes')
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            alert('Error: ' + data.error);
            return;
          }

          if (data.voice_notes.length === 0) {
            alert('No voice notes found! Please upload some voice notes first.\n\nYou can upload voice notes from your dashboard.');
            return;
          }

          // Show voice notes popup
          showVoiceNotesPopup(data.voice_notes);
        })
        .catch(error => {
          console.error('Error fetching voice notes:', error);
          alert('Failed to load voice notes. Please try again.');
        })
        .finally(() => {
          button.innerHTML = originalText;
          button.disabled = false;
        });
    };

    // Function to show location shared popup
    function showLocationPopup(lat, lng, accuracy) {
      // Create popup overlay
      const overlay = document.createElement('div');
      overlay.className = 'location-popup-overlay';
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        background: white;
        padding: 30px;
        border-radius: 20px;
        border: 3px solid #4caf50;
        max-width: 400px;
        text-align: center;
        box-shadow: 0 20px 40px rgba(76, 175, 80, 0.3);
        animation: popupSlideIn 0.3s ease-out;
      `;
      popup.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: #4caf50;">
          ‚úîÔ∏è
        </div>
        <h2 style="color: #333; font-family: 'Dancing Script', cursive; font-size: 2rem; margin-bottom: 15px;">
          Location Shared!
        </h2>
        <p style="color: #666; margin-bottom: 20px; line-height: 1.5;">
          Your current location has been shared with your emergency contacts.<br>
          Latitude: ${lat}<br>
          Longitude: ${lng}<br>
          Accuracy: ¬±${accuracy} meters
        </p>
        <button onclick="this.closest('.location-popup-overlay').remove()" style="
          background: #4caf50;
          border: none;
          padding: 12px 25px;
          border-radius: 15px;
          color: white;
          font-weight: 600;
          cursor: pointer;
          font-size: 1rem;
        ">Close</button>
      `;
      overlay.appendChild(popup);
      document.body.appendChild(overlay);
      
      // Add animation styles if not already present
      if (!document.getElementById('popup-slidein-style')) {
        const style = document.createElement('style');
        style.id = 'popup-slidein-style';
        style.textContent = `
          @keyframes popupSlideIn {
            from { transform: scale(0.8) translateY(-20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
          }
        `;
        document.head.appendChild(style);
      }
    }

    // Function to show voice notes popup
    function showVoiceNotesPopup(voiceNotes) {
      // Create popup overlay
      const overlay = document.createElement('div');
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(5px);
      `;

      // Create popup content
      const popup = document.createElement('div');
      popup.style.cssText = `
        background: var(--bg-card);
        border: 3px solid var(--cute-pink);
        border-radius: 20px;
        padding: 30px;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 50px rgba(255, 182, 193, 0.4);
        backdrop-filter: blur(20px);
        animation: popupSlideIn 0.3s ease-out;
      `;

      let voiceNotesHTML = `
        <div style="text-align: center; margin-bottom: 25px;">
          <h3 style="font-family: 'Dancing Script', cursive; font-size: 2.2rem; color: var(--text-primary); margin-bottom: 10px;">
            Your Voice Notes
          </h3>
          <p style="color: var(--text-secondary); font-size: 1rem;">
            Select a voice note to play during your fake call
          </p>
        </div>
        <div style="display: flex; flex-direction: column; gap: 15px;">
      `;

      voiceNotes.forEach(note => {
        const fileName = note.filename.length > 30 ? note.filename.substring(0, 30) + '...' : note.filename;
        const createdDate = new Date(note.created_at).toLocaleDateString();
        
        voiceNotesHTML += `
          <div style="
            background: rgba(255, 255, 255, 0.6);
            border: 2px solid var(--cute-pink);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
          " onmouseover="this.style.background='rgba(255, 182, 193, 0.3)'" 
             onmouseout="this.style.background='rgba(255, 255, 255, 0.6)'">
            <div>
              <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 5px;">
                ${fileName}
              </div>
              <div style="font-size: 0.85rem; color: var(--text-secondary);">
                ${createdDate}
              </div>
            </div>
            <button onclick="playVoiceNoteInPopup(${note.id})" style="
              background: var(--primary);
              border: none;
              padding: 8px 16px;
              border-radius: 20px;
              color: white;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              font-size: 0.9rem;
            " onmouseover="this.style.transform='scale(1.1)'" 
               onmouseout="this.style.transform='scale(1)'">
              Play
            </button>
          </div>
        `;
      });

      voiceNotesHTML += `
        </div>
        <div style="text-align: center; margin-top: 25px;">
          <button onclick="closeVoiceNotesPopup()" style="
            background: var(--accent);
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
          " onmouseover="this.style.transform='translateY(-2px)'" 
             onmouseout="this.style.transform='translateY(0)'">
            Close
          </button>
        </div>
      `;

      popup.innerHTML = voiceNotesHTML;
      overlay.appendChild(popup);
      document.body.appendChild(overlay);

      // Store reference for closing
      window.currentVoiceNotesPopup = overlay;

      // Add CSS for popup animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes popupSlideIn {
          from {
            opacity: 0;
            transform: translateY(-50px) scale(0.9);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `;
      document.head.appendChild(style);
    }

    // Function to play voice note in popup
    function playVoiceNoteInPopup(noteId) {
      const audio = new Audio(`/play-voice-note/${noteId}`);
      audio.play().then(() => {
        showFlashMessage('Playing voice note!', 'success');
      }).catch(error => {
        console.error('Error playing voice note:', error);
        showFlashMessage('Failed to play voice note. Please check the file format.', 'error');
      });
    }

    // Function to close voice notes popup
    function closeVoiceNotesPopup() {
      if (window.currentVoiceNotesPopup) {
        document.body.removeChild(window.currentVoiceNotesPopup);
        delete window.currentVoiceNotesPopup;
      }
    }

    // Flash message function
    function showFlashMessage(message, type) {
      // Create flash message element
      const flashDiv = document.createElement('div');
      flashDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 10px;
        color: white;
        font-weight: 500;
        z-index: 10001;
        animation: slideInRight 0.3s ease-out;
        min-width: 300px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      `;
      
      // Set background color based on type
      if (type === 'success') {
        flashDiv.style.background = 'linear-gradient(135deg, #4caf50, #8bc34a)';
      } else if (type === 'error') {
        flashDiv.style.background = 'linear-gradient(135deg, #f44336, #ff5722)';
      } else {
        flashDiv.style.background = 'linear-gradient(135deg, #ff9800, #ffc107)';
      }
      
      flashDiv.textContent = message;
      document.body.appendChild(flashDiv);
      
      // Auto remove after 4 seconds
      setTimeout(() => {
        flashDiv.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => {
          if (flashDiv.parentElement) {
            flashDiv.remove();
          }
        }, 300);
      }, 4000);
      
      // Add animation styles if not already added
      if (!document.querySelector('#flash-animations')) {
        const style = document.createElement('style');
        style.id = 'flash-animations';
        style.textContent = `
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
    }

    // Fake Voice Note Function
    window.playFakeVoiceNote = function() {
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = 'Playing...';
      button.disabled = true;
      
      // Create fake voice note audio
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      // Play a sequence of beeps and tones to simulate voice note
      const fakeVoiceSequence = [
        { freq: 800, duration: 200 },
        { freq: 0, duration: 100 },
        { freq: 600, duration: 300 },
        { freq: 0, duration: 150 },
        { freq: 900, duration: 250 },
        { freq: 0, duration: 100 },
        { freq: 700, duration: 400 },
        { freq: 0, duration: 200 },
        { freq: 1000, duration: 300 }
      ];
      
      let currentTime = audioContext.currentTime;
      
      fakeVoiceSequence.forEach(tone => {
        if (tone.freq > 0) {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.setValueAtTime(tone.freq, currentTime);
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0, currentTime);
          gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.01);
          gainNode.gain.linearRampToValueAtTime(0, currentTime + tone.duration / 1000);
          
          oscillator.start(currentTime);
          oscillator.stop(currentTime + tone.duration / 1000);
        }
        currentTime += tone.duration / 1000;
      });
      
      // Show fake voice note message
      setTimeout(() => {
        alert('Playing fake voice note:

"Hey, I am in a meeting right now and can not talk. Can you call me back in 20 minutes? Thanks!"

This creates the illusion that you are busy and can not be disturbed.');
      }, 500);
      
      // Reset button after fake voice note
      setTimeout(() => {
        button.innerHTML = originalText;
        button.disabled = false;
      }, 3000);
    };

    // Fake Voice Call Function  
    window.startFakeCall = function() {
      // Check if user is logged in
      {% if not session.user_id %}
        alert('Please login first to access your voice notes!');
        window.location.href = '{{ url_for("login") }}';
        return;
      {% endif %}

      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = 'üì± Loading Voice Notes...';
      button.disabled = true;

      // Fetch voice notes from the server
      fetch('/get-voice-notes')
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            alert('Error: ' + data.error);
            return;
          }

          if (data.voice_notes.length === 0) {
            alert('No voice notes found! Please upload some voice notes first.\n\nYou can upload voice notes from your dashboard.');
            return;
          }

          // Show voice notes popup
          showVoiceNotesPopup(data.voice_notes);
        })
        .catch(error => {
          console.error('Error fetching voice notes:', error);
          alert('Failed to load voice notes. Please try again.');
        })
        .finally(() => {
          button.innerHTML = originalText;
          button.disabled = false;
        });
    };

    // Fake ringtone functions
    let ringtoneAudio = null;
    
    function playFakeRingtone(type) {
      // Create audio context for ringtone
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      // Different ringtone patterns
      const ringtones = {
        default: [{ freq: 800, duration: 500 }, { freq: 0, duration: 500 }],
        mom: [{ freq: 900, duration: 300 }, { freq: 700, duration: 300 }, { freq: 0, duration: 400
        professional: [{ freq: 1000, duration: 800 }, { freq: 0, duration: 1200 }],
        urgent: [{ freq: 1200, duration: 200 }, { freq: 0, duration: 100 }, { freq: 1200, duration: 200 }, { freq: 0, duration: 500 }]
      };
      
      const pattern = ringtones[type] || ringtones.default;
      
      function playPattern
      
      function playPattern() {
        let currentTime = audioContext.currentTime;
        
        pattern.forEach(tone => {
          if (tone.freq > 0) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(tone.freq, currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0, currentTime);
            gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.01);
            gainNode.gain.linearRampToValueAtTime(0, currentTime + tone.duration / 1000);
            
            oscillator.start(currentTime);
            oscillator.stop(currentTime + tone.duration / 1000);
          }
          currentTime += tone.duration / 1000;
        });
      }
      
      // Stop any ongoing ringtone
      if (ringtoneAudio) {
        ringtoneAudio.pause();
        ringtoneAudio.currentTime = 0;
      }
      
      // Play new ringtone
      playPattern();
      
      // Vibration pattern for urgent ringtone
      if (type === 'urgent' && navigator.vibrate) {
        navigator.vibrate([200, 100, 200, 100, 200]);
      }
    }
  </script>
</body>
</html>